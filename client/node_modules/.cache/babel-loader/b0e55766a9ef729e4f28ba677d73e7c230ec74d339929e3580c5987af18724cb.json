{"ast":null,"code":"import { createSlice, createAsyncThunk } from '@reduxjs/toolkit';\nimport axios from 'axios';\n\n// Enroll in course\nexport const enrollInCourse = createAsyncThunk('enrollments/enrollInCourse', async (courseId, {\n  rejectWithValue\n}) => {\n  try {\n    const response = await axios.post(`/enrollments/${courseId}`);\n    return response.data.enrollment;\n  } catch (error) {\n    return rejectWithValue(error.response.data.message);\n  }\n});\n\n// Get my courses\nexport const getMyCourses = createAsyncThunk('enrollments/getMyCourses', async (_, {\n  rejectWithValue\n}) => {\n  try {\n    const response = await axios.get('/enrollments/my-courses');\n    return response.data.enrollments;\n  } catch (error) {\n    return rejectWithValue(error.response.data.message);\n  }\n});\nconst initialState = {\n  enrollments: [],\n  loading: false,\n  error: null\n};\nconst enrollmentSlice = createSlice({\n  name: 'enrollments',\n  initialState,\n  reducers: {\n    clearError: state => {\n      state.error = null;\n    }\n  },\n  extraReducers: builder => {\n    builder\n    // Enroll in Course\n    .addCase(enrollInCourse.pending, state => {\n      state.loading = true;\n    }).addCase(enrollInCourse.fulfilled, (state, action) => {\n      state.loading = false;\n      state.enrollments.push(action.payload);\n      state.error = null;\n    }).addCase(enrollInCourse.rejected, (state, action) => {\n      state.loading = false;\n      state.error = action.payload;\n    })\n    // Get My Courses\n    .addCase(getMyCourses.pending, state => {\n      state.loading = true;\n    }).addCase(getMyCourses.fulfilled, (state, action) => {\n      state.loading = false;\n      state.enrollments = action.payload;\n      state.error = null;\n    }).addCase(getMyCourses.rejected, (state, action) => {\n      state.loading = false;\n      state.error = action.payload;\n    });\n  }\n});\nexport const {\n  clearError\n} = enrollmentSlice.actions;\nexport default enrollmentSlice.reducer;","map":{"version":3,"names":["createSlice","createAsyncThunk","axios","enrollInCourse","courseId","rejectWithValue","response","post","data","enrollment","error","message","getMyCourses","_","get","enrollments","initialState","loading","enrollmentSlice","name","reducers","clearError","state","extraReducers","builder","addCase","pending","fulfilled","action","push","payload","rejected","actions","reducer"],"sources":["F:/new/client/src/store/slices/enrollmentSlice.js"],"sourcesContent":["import { createSlice, createAsyncThunk } from '@reduxjs/toolkit';\r\nimport axios from 'axios';\r\n\r\n// Enroll in course\r\nexport const enrollInCourse = createAsyncThunk('enrollments/enrollInCourse', async (courseId, { rejectWithValue }) => {\r\n  try {\r\n    const response = await axios.post(`/enrollments/${courseId}`);\r\n    return response.data.enrollment;\r\n  } catch (error) {\r\n    return rejectWithValue(error.response.data.message);\r\n  }\r\n});\r\n\r\n// Get my courses\r\nexport const getMyCourses = createAsyncThunk('enrollments/getMyCourses', async (_, { rejectWithValue }) => {\r\n  try {\r\n    const response = await axios.get('/enrollments/my-courses');\r\n    return response.data.enrollments;\r\n  } catch (error) {\r\n    return rejectWithValue(error.response.data.message);\r\n  }\r\n});\r\n\r\nconst initialState = {\r\n  enrollments: [],\r\n  loading: false,\r\n  error: null,\r\n};\r\n\r\nconst enrollmentSlice = createSlice({\r\n  name: 'enrollments',\r\n  initialState,\r\n  reducers: {\r\n    clearError: (state) => {\r\n      state.error = null;\r\n    },\r\n  },\r\n  extraReducers: (builder) => {\r\n    builder\r\n      // Enroll in Course\r\n      .addCase(enrollInCourse.pending, (state) => {\r\n        state.loading = true;\r\n      })\r\n      .addCase(enrollInCourse.fulfilled, (state, action) => {\r\n        state.loading = false;\r\n        state.enrollments.push(action.payload);\r\n        state.error = null;\r\n      })\r\n      .addCase(enrollInCourse.rejected, (state, action) => {\r\n        state.loading = false;\r\n        state.error = action.payload;\r\n      })\r\n      // Get My Courses\r\n      .addCase(getMyCourses.pending, (state) => {\r\n        state.loading = true;\r\n      })\r\n      .addCase(getMyCourses.fulfilled, (state, action) => {\r\n        state.loading = false;\r\n        state.enrollments = action.payload;\r\n        state.error = null;\r\n      })\r\n      .addCase(getMyCourses.rejected, (state, action) => {\r\n        state.loading = false;\r\n        state.error = action.payload;\r\n      });\r\n  },\r\n});\r\n\r\nexport const { clearError } = enrollmentSlice.actions;\r\nexport default enrollmentSlice.reducer;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}